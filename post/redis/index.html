<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Redis | myStudyNotes</title>
<link rel="shortcut icon" href="https://rexshi96.github.io/favicon.ico?v=1594435373386">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://rexshi96.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Redis | myStudyNotes - Atom Feed" href="https://rexshi96.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="Redis
1.简介
概念：Redis (REmote DIctionary Server) 是用 C 语言开发的一个开源的高性能键值对（key-value）数据库。
特征：
1.  数据间没有必然的关联关系
2. 内部采用单线程机制进行工..." />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://rexshi96.github.io">
  <img class="avatar" src="https://rexshi96.github.io/images/avatar.png?v=1594435373386" alt="">
  </a>
  <h1 class="site-title">
    myStudyNotes
  </h1>
  <p class="site-description">
    
  </p>
  <div class="menu-container">
    
      
        <a href="archives" class="menu">
          学习笔记
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Redis
            </h2>
            <div class="post-info">
              <span>
                2020-07-11
              </span>
              <span>
                6 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h1 id="redis">Redis</h1>
<h2 id="1简介">1.简介</h2>
<p>概念：Redis (REmote DIctionary Server) 是用 C 语言开发的一个开源的高性能键值对（key-value）数据库。</p>
<p>特征：</p>
<pre><code class="language-java">1.  数据间没有必然的关联关系
2. 内部采用单线程机制进行工作
3. 高性能。官方提供测试数据，50个并发执行100000 个请求,读的速度是110000 次/s,写的速度是81000次/s。
4. 多数据类型支持
   * 字符串类型 string
   * 列表类型 list
   * 散列类型 hash
   * 集合类型 set
   * 有序集合类型 sorted_set
5. 持久化支持。可以进行数据灾难恢复
</code></pre>
<p>应用：</p>
<pre><code class="language-java">1. 为热点数据加速查询（主要场景），如热点商品、热点新闻、热点资讯、推广类等高访问量信息等
2. 任务队列，如秒杀、抢购、购票排队等
3.  即时信息查询，如各位排行榜、各类网站访问统计、公交到站信息、在线人数信息（聊天室、网站）、设
   备信号等
4.  时效性信息控制，如验证码控制、投票控制等
5.  分布式数据共享，如分布式集群架构中的 session 分离
6.  消息队列
7. 分布式锁
</code></pre>
<h2 id="2数据类型">2.数据类型</h2>
<p>Redis 数据类型（5种常用）</p>
<pre><code class="language-java">* string		   String
* hash             HashMap
* list             LinkedList
* set              HashSet
* sorted_set       TreeSet
</code></pre>
<p>redis 数据存储格式:</p>
<pre><code class="language-java">redis 自身是一个 Map，其中所有的数据都是采用 key : value 的形式存储
数据类型指的是存储的数据的类型，也就是 value 部分的类型，key 部分永远都是字符串
</code></pre>
<h3 id="string类型">string类型</h3>
<pre><code class="language-java"> 存储的数据：单个数据，最简单的数据存储类型，也是最常用的数据存储类型
 存储数据的格式：一个存储空间保存一个数据
 存储内容：通常使用字符串，如果字符串以整数的形式展示，可以作为数字操作使用 Tips 1：
	* redis用于控制数据库表主键id，为数据库表主键提供生成策略，保障数据库表的主键唯一性
	* 此方案适用于所有数据库，且支持数据库集群
    
Tips 2：
    * redis 控制数据的生命周期，通过数据是否失效控制业务行为，适用于所有具有时效性限定控制的操作

Tips 3：
    * redis应用于各种结构型和非结构型高热度数据访问加速


</code></pre>
<pre><code class="language-java">key 的设置约定 ：
    数据库中的热点数据key命名惯例
    表名：主键名：主键值：字段名
</code></pre>
<h3 id="hash类型">hash类型</h3>
<pre><code class="language-java">hash存储结构优化
    如果field数量较少，存储结构优化为类数组结构
    如果field数量较多，存储结构使用HashMap结构

hash 类型数据操作的注意事项：
    hash类型下的value只能存储字符串，不允许存储其他数据类型，不存在嵌套现象。如果数据未获取到，对应的值为（nil）
    每个 hash 可以存储 2 32 - 1 个键值对
    hash类型十分贴近对象的数据存储形式，并且可以灵活添加删除对象属性。但hash设计初衷不是为了存储大量对象而设计的，切记不可滥用，更不可以将hash作为对象列表使用
    hgetall 操作可以获取全部属性，如果内部field过多，遍历整体数据效率就很会低，有可能成为数据访问瓶颈
    
Tips 4：
    redis 应用于购物车数据存储设计
Tips 5：
    redis 应用于抢购，限购类、限量发放优惠卷、激活码等业务的数据存储设计
</code></pre>
<h3 id="list类型">list类型</h3>
<ul>
<li>数据存储需求：存储多个数据，并对数据进入存储空间的顺序进行区分</li>
<li>需要的存储结构：一个存储空间保存多个数据，且通过数据可以体现进入顺序</li>
<li>list类型：保存多个数据，底层使用双向链表存储结构实现</li>
</ul>
<figure data-type="image" tabindex="1"><img src="https://rexshi96.github.io/post-images/1594434421776.png" alt="" loading="lazy"></figure>
<p>Tips 6：</p>
<p>​			redis 应用于具有操作先后顺序的数据控制</p>
<p>Tips 7：<br>
redis 应用于最新消息展示</p>
<pre><code class="language-java">list 类型数据操作注意事项：

* list中保存的数据都是string类型的，数据总容量是有限的，最多2 32 - 1 个元素 (4294967295)。
*  list具有索引的概念，但是操作数据时通常以队列的形式进行入队出队操作，或以栈的形式进行入栈出栈操作 
* 获取全部数据操作结束索引设置为-1
* list可以对数据进行分页操作，通常第一页的信息来自于list，第2页及更多的信息通过数据库的形式加载
</code></pre>
<h3 id="set类型">set类型</h3>
<ul>
<li>
<p>新的存储需求：存储大量的数据，在<strong>查询</strong>方面提供更高的效率</p>
</li>
<li>
<p>需要的存储结构：能够保存大量的数据，<strong>高效</strong>的内部存储机制，便于查询</p>
</li>
<li>
<p>set类型：与<strong>hash</strong>存储结构完全相同，仅存储键，不存储值（nil），并且值是不允许重复的</p>
</li>
</ul>
<figure data-type="image" tabindex="2"><img src="https://rexshi96.github.io/post-images/1594434442551.png" alt="" loading="lazy"></figure>
<p>Tips 8：</p>
<p>​		 redis 应用于随机推荐类信息检索，例如热点歌单推荐，热点新闻推荐，热卖旅游线路，应用APP推荐，<br>
大V推荐等</p>
<p>Tips 9：</p>
<ul>
<li>redis 应用于同类信息的关联搜索，二度关联搜索，深度关联搜索</li>
<li>显示共同关注（一度）</li>
<li>显示共同好友（一度）</li>
<li>由用户A出发，获取到好友用户B的好友信息列表（一度）</li>
<li>由用户A出发，获取到好友用户B的购物清单列表（二度）</li>
<li>由用户A出发，获取到好友用户B的游戏充值列表（二度）</li>
</ul>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#redis">Redis</a>
<ul>
<li><a href="#1%E7%AE%80%E4%BB%8B">1.简介</a></li>
<li><a href="#2%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">2.数据类型</a>
<ul>
<li><a href="#string%E7%B1%BB%E5%9E%8B">string类型</a></li>
<li><a href="#hash%E7%B1%BB%E5%9E%8B">hash类型</a></li>
<li><a href="#list%E7%B1%BB%E5%9E%8B">list类型</a></li>
<li><a href="#set%E7%B1%BB%E5%9E%8B">set类型</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        

        

        <div class="site-footer">
  
  <a class="rss" href="https://rexshi96.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
